<!--
Google IO 2012/2013 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mah√© <lukem@google.com>

URL: <a href="https://protect-au.mimecast.com/s/2d3wCvl122HrO3K6iXsu93?domain=code.google.com">https://code.google.com/p/io-2012-slides</a>
-->
<!DOCTYPE html>
<html>
<head>
  <title>01DatabaseDesignQuality</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen"> 
<!-- slide 01 ================================================================================= -->
  <slide class="title-slide segue ">
    <aside class="gdbar">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XBAU3014N Database Systems</aside> 
    <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
    <hgroup class="auto-fadein">
      <h1 class="black" data-config-title>Database Design Quality</h1>
      <h2 class="black" data-config-subtitle><!-- populated from slide_config.json --></h2>
      <p class="black" data-config-presenter><!-- populated from slide_config.json --></p>
    </hgroup>
  </slide>
<!-- slide 02 ================================================================================= -->
  <slide>
    <hgroup>
      <h2 class="blue">Database Design Quality</h2>
      <h3 class="red">Outline</h3>
    </hgroup>
    <article>
      <ul>
       <li><a class="red" href="#2">Why not ONE BIG TABLE !?</a></li>	
	<li><a href="#8">Where is a problem ?</a></li>	
	<li><a href="#13">Functional dependency</a></li>	
      </ul>
<footer class="source"><a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 03 ================================================================================= -->
<slide>
     <aside class="note">
      <section>
	<p>An interesting question related to a process of logical design is why do we need to create many relational table instead of ONE BIG TABLE where we could store all data ? Transformation of the classes of objects into relational schemas later on implemented as relational table and filled with rows seems to be a very natural and very straightforward decision. But, in a case when we transform one-to-one association we merge the attributes from two classes into one relational schema. Can we do the same thing with the classes linked with one-to-many association and many-to-many association ?</p>
	<br/>
	<p>Or when we create a conceptual schema can we create ON BIG CLASS and later on transform such class in ONE BIG TABLE ?</p>
	<br/>
	<p>In order to find why we cannot have ONE BIG TABLE let us look at the following example. Let us consider the following database domain:</p>
	<br/>
	<p>A customer is described by a unique customer number, first and last name. Customers submit orders. An order is described by a unique order number and order date. Orders consist of lines. A line contains information about a name of ordered item, price per single item and total number of ordered items.</p>
	<br/>
	<p>A conceptual schema obtained from a process of object modeling is given on the present slide. We created three classes of objects: CUSTOMER, ORDER and LINE. Then, we linked the classes with the associations: CUSTOMER Submits ORDER and ORDER Consists-of LINE.</p>
	<br/>
	<p>There is no doubts, that such conceptual schema represents a given database domain in a consistent and comprehensive way.</p>
	<br/>
      </section>
    </aside>  
  <hgroup>
    <h2 class="blue">Why not ONE BIG TABLE !?</h2>
  </hgroup>
    <article class="smallest">
      <ul class= "build">
        <li>Let us consider the following database domain:
          <ul class="build">
            <li>A <strong class="blue3">customer</strong> is described by a unique <strong class="blue3">customer number</strong>, <strong class="blue3">first</strong>, and <strong class="blue3">last name</strong></li>
            <li><strong class="blue3">Customers</strong> submit <strong class="blue3">orders</strong>. An <strong class="blue3">order</strong> is described by a <strong class="blue3">unique order number</strong> and <strong class="blue3">order date</strong></li>
            <li><strong class="blue3">Orders</strong> consist of <strong class="blue3">lines</strong>. A <strong class="blue3">line</strong> contains information about a <strong class="blue3">name of ordered item</strong>, <strong class="blue3">price per single item</strong>, and <strong class="blue3">total number of ordered items</strong></li>
          </ul>
        </li>
        <p style="text-align:center;"><img src="images/slide-03-1.png" width="650" alt="Association class" title="Multivalued attribute"></p>	 
	<li>Logical design provides the following relational schemas:
	  <ul class="build">
<pre class="prettyprint" data-lang="Relational schemas">
CUSTOMER(cnumber, first-name, last-name) 
PRIMARY KEY = (cnumber)

ORDERS(onumber, odate, cnumber) PRIMARY KEY = (onumber)
FOREIGN KEY = (cnumber) REFERENCES CUSTOMER(cnumber)

LINE(onumber, lnumber, item, price total)
PRIMARY KEY = (onumber, lnumber)
FOREIGN KEY = (onumber) REFERENCES ORDERS(onumber)</pre>
          </ul>
	</li>
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 04 ================================================================================= -->
<slide>
 <aside class="note">
      <section>
	<p>Now, we apply to the conceptual schema created on the previous slide a process of logical design and we get three relational schemas:</p>
	<br/>
	<p>CUSTOMER(cnumber, first-name, last-name) </p>
	<br/>
	<p>PRIMARY KEY = (cnumber)</p>
	<br/>
	<p>ORDERS(onumber, odate, cnumber) PRIMARY KEY = (onumber)</p>
	<br/>
	<p>FOREIGN KEY = (cnumber) REFERENCES CUSTOMER(cnumber)</p>
	<br/>
	<p>and</p>
	<br/>
	<p>LINE(onumber, lnumber, item, price total)</p>
	<br/>
	<p>PRIMARY KEY = (onumber, lnumber)</p>
	<br/>
	<p>FOREIGN KEY = (onumber) REFERENCES ORDERS(onumber)</p>
	<br/>
	<p>The foreign keys in the relational schemas ORDERS and LINE reference the respective primary keys in the relational tables CUSTOMER and ORDERS. These are the outcomes from a typical process of conceptual modeling followed by a process of logical design.</p>
	<br/>
	<p>Now, we return to the first question: is it possible to have ONE BIG TABLE with a header (relational schema), that consists of all attributes used in the design ?</p>
	<br/>
	<p>For example:</p>
	<br/>
	<p>CUSTOMER(cnumber, first-name, last-name, onumber, odate, cnumber, onumber, lnumber, item, price total)</p>
	<br/>
	<p>PRIMARY KEY = (cnumber, onumber, lnumber)</p>
	<br/>
	<p>Primary key in such table would be a composite key, that uniquely identifies each line in each order. It is why primary key consists of the attributes (onumber, lnumber).</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Why not ONE BIG TABLE !?</h2>
    </hgroup>
    <article class="smaller">
      <ul class= "build">
        <li>Why not one relational schema ?
          <ul class="build">
<pre class="prettyprint" data-lang="Big relational schema">

CUSTOMER(cnumber, first-name, last-name, onumber, odate, cnumber, onumber, lnumber, item, price total)
PRIMARY KEY = (cnumber, onumber, lnumber)</pre>
          </ul>
	</li>
	<li>Insertion of information about one customer who submitted 2 orders such that each order consists several lines reveals a problem !
	  <ul class="build">
<pre class="prettyprint" data-lang="Big relational table">

+---------+-------+-------+---------+-------------+---------+-------+-------+-------+
| cnumber | fname | lname | onumber | odate       | lnumber | item  | price | total |
+---------+-------+-------+---------+-------------+---------+-------+-------+-------+
|    +----------------------+   +---------------+ |         |       |       |       |
|    |  7 | James | Bond  | |   | 7 | 2017-01-01| |       1 | bolt  | 23.04 |     5 |
|    |  7 | James | Bond  | |   | 7 | 2017-01-01| |       2 | screw | 29.01 |     3 |
|    |  7 | James | Bond  | |   | 7 | 2017-01-01| |       3 | nut   |  4.55 |     2 |
|    |    |       |       | |   +---------------+ |         |       |       |       |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       1 | bolt  | 23.04 |     1 |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       2 | screw | 23.04 |     1 |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       3 | nut   | 23.04 |     2 |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       4 | lock  | 23.04 |     1 |
|    +----------------------+   +---------------+ |         |       |       |       |
+---------+-------+-------+---------+-------------+---------+-------+-------+-------+</pre>
          </ul>
	</li>
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 05 ================================================================================= -->
<slide>
 <aside class="note">
      <section>
	<p>At the first glance, ONE BIG TABLE design looks all right. However, insertion of few rows into such table reveals the problems.</p>
	<br/>
	<p>Two rows that contain information about two lines from the same order have order date information repeated twice, for example a date 2017-01-01 of an order number 7 is repeated twice because such order consists of 2 lines. If an would consist of 100 lines then order date would be repeated 100 time. Next, information about a customer submitted order like first and last name is repeated as many time as many lines all orders consists of. In our example it is repeated 5 times.</p>
	<br/>
	<p>In conclusion, A number, first name and last name of a customer is repeated as many times as the total number of different items purchased in all orders and order number is repeated together with order date as many times as the total number of different items purchased in an order.</p>
	<br/>
	<p>It means that ONE BIG TABLE may have a lot of redundancies and it is the main reason why such design is not good.</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Why not ONE BIG TABLE !?</h2>
    </hgroup>
    <article class="smaller">
      <ul>
	<li>
	  <ul>
	    <pre class="prettyprint" data-lang="Big relational table">
	      
+---------+-------+-------+---------+-------------+---------+-------+-------+-------+
| cnumber | fname | lname | onumber | odate       | lnumber | item  | price | total |
+---------+-------+-------+---------+-------------+---------+-------+-------+-------+
|    +----------------------+   +---------------+ |         |       |       |       |
|    |  7 | James | Bond  | |   | 7 | 2017-01-01| |       1 | bolt  | 23.04 |     5 |
|    |  7 | James | Bond  | |   | 7 | 2017-01-01| |       2 | screw | 29.01 |     3 |
|    |  7 | James | Bond  | |   | 7 | 2017-01-01| |       3 | nut   |  4.55 |     2 |
|    |    |       |       | |   +---------------+ |         |       |       |       |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       1 | bolt  | 23.04 |     1 |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       2 | screw | 23.04 |     1 |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       3 | nut   | 23.04 |     2 |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       4 | lock  | 23.04 |     1 |
|    +----------------------+   +---------------+ |         |       |       |       |
+---------+-------+-------+---------+-------------+---------+-------+-------+-------+</pre>
          </ul>
	</li>
	</ul>
	<ul class="build">
	  <li>A <strong class="blue3">number</strong>, <strong class="blue3">first name</strong>, and <strong class="blue3">last name</strong> of a customer is repeated as many times as the total number of different items purchased in all orders and ... </li>	  
	  <li>... and <strong class="blue3">order number</strong> is repeated together with <strong class="blue3">order date</strong> as many times as the total number of different items purchased in an order</li>
	</ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
</slide>
<!-- slide 06 ================================================================================= -->
  <slide>
   <aside class="note">
      <section>
	<p>The original relational design, that consists of 3 tables does not have such problem. </p>
	<br/>
	<p>Information about a customer such as customer number, first name and last name is repeated one time in a relational table CUSTOMER.</p>
	<br/>
	<p>Information about an order such as order number and order date is repeated one time in a relational table ORDERS.</p>
	<br/>
	<p>A customer number in a relational table ORDERS is repeated as many times as many orders are submitted by a customer. This sort of redundancy where a value of a foreign key is repeated many times is inevitable in a relational data model. Such redundancy can be eliminated at a stahe of physical design through clustering of a relational table ORDERS on a clustering key cnumber.</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Why not ONE BIG TABLE !?</h2>
    </hgroup>
    <article>
      <ul class= "build">
        <li>A multitable design does not have such a problem:
	  <ul class="build">
<pre class="prettyprint" data-lang="CUSTOMER schema">
CUSTOMER(cnumber, first-name, last-name) 
PRIMARY KEY = (cnumber)</pre>

<pre class="prettyprint" data-lang="CUSTOMER table">
+---------+-------+-------+
| cnumber | fname | lname |
+---------+-------+-------+
|       7 | James | Bond  |
+---------+-------+-------+</pre>
<pre class="prettyprint" data-lang="ORDERS schema">
ORDERS(onumber, odate, cnumber) PRIMARY KEY = (onumber)
FOREIGN KEY = (cnaumber) REFERENCES CUSTOMER(cnumber)</pre>
<pre class="prettyprint" data-lang="ORDERS table">
+---------+------------+---------+
| onumber | odate      | cnumber |
+---------+------------+---------+
|       7 | 2017-01-01 |       7 |
|       8 | 2018-01-01 |       7 |
+---------+------------+---------+</pre>
          </ul>
	</li>
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 07 ================================================================================= -->
  <slide>
   <aside class="note">
      <section>
	<p>A relational  table LINE contains the repetition of the order numbers in a column onumber. It is because a column onumber is a foreign key in a relational table LINE. The repetitions of the values in foreign key columns are inevitable in the relational data model. However, such repetitions can be eliminated at the physical stage of  a design through clustering of the relational table(s).</p>
	<br/>
	<p>In the past (when the hard drives had the capacities ~40Mbs, hmmm, hard to believe in something like that, these days ...) at the ed of logical design the relational tables with the long primary keys, i.e. composite primary keys that consisted of 3 or more attributes obtained an additional attribute called "surrogate key". Then surrogate key could be used as the foreign keys in the other relational tables to implement in the relational model an association between the classes of objects. A goal of using surrogate keys was to avoid large storage consumption for storing the values of foreign keys.</p>
	<br/>
	<p>Nowadays, we do not use surrogate keys. Now, "surrogate keys" is a "blast from the past" because of large amounts of cheap and faster persistent storage available fro implementation of relational tables. It is even better to have long composite primary keys because it is away how more attributes can be copied to the other tables as foreign keys. Such strategy reduces the probabilities of joins and makes query processing faster.</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Why not ONE BIG TABLE !?</h2>
    </hgroup>
    <article>
      <ul>
        <li>A multitable design does not have such a problem:
	  <ul class="build">
<pre class="prettyprint" data-lang="LINE schema">
LINE(onumber, lnumber, item, price total)
PRIMARY KEY = (onumber, lnumber)
FOREIGN KEY = (onumber) REFERENCES ORDERS(onumber)</pre>
<pre class="prettyprint" data-lang="LINE table">
+---------+---------+-------+-------+-------+
| onumber | lnumber | item  | price | total |
+---------+---------+-------+-------+-------+
|       7 |       1 | bolt  | 23.04 |     5 |
|       7 |       2 | screw | 29.01 |     3 |
|       7 |       3 | nut   |  4.55 |     2 |
|       8 |       1 | bolt  | 23.04 |     1 |
|       8 |       2 | screw | 23.04 |     1 |
|       8 |       3 | nut   | 23.04 |     2 |
|       8 |       4 | lock  | 23.04 |     1 |
+---------+---------+-------+-------+-------+</pre>
          </ul>
	</li>
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 08 ================================================================================= -->
  <slide>
    <hgroup>
      <h2 class="blue">Database Design Quality</h2>
      <h3 class="red">Outline</h3>
    </hgroup>
    <article>
      <ul>
        <li><a href="#2">Why not ONE BIG TABLE !?</a></li>	
	<li><a class="red" href="#8">Where is a problem ?</a></li>	
	<li><a href="#13">Functional dependency</a></li>	
      </ul>
<footer class="source"><a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 09 ================================================================================= -->
  <slide>
   <aside class="note">
      <section>
	<p>So, ONE BIG TABLE is not a good solution if we would like to minimize the redundancies from the relational tables. An interesting question is why do we get the redundancies in incorrectly designed relational tables ?</p>
	<br/>
	<p>To answer such question assume, that we have a relational table with colours and assume, that the following data dependencies are valid in the tables:</p>
	<br/>
	<p>- whenever a value in COLUMN_1 is green then in the same row a value in COLUMN_2 is red</p>
	<br/>
	<p>- whenever a value in COLUMN_1 is blue then in the same row a value in COLUMN_2 is yellow</p>
	<br/>
	<p>- whenever a value in COLUMN_1 is orange then in the same row a value in COLUMN_2 is red</p>
	<br/>
	<p>It is possible to generalize the data dependencies listed above into a single template:</p>
	<br/>
	<p>- whenever a value in COLUMN_1 is x then in the same row a value in COLUMN_2 is year</p>
	<br/>
	<p>If we know that such data dependency holds in every state of the relational table then practically there is no need to include COLUMN_2 in the relational table because each value in COLUMN_2 can be logically derived from a value in COLUMN_1.</p>
	<br/>
	<p>Hence, there is no need to repeat the pairs (green,red), (blue,yellow) and (orange, red). It is why due to the different values in the related columns the redundancies are inevitable.</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Where is a problem ?</h2>
    </hgroup>
    <article>
      <ul class="build">
        <li>Why do we get redundancies in an incorrectly designed relational table ?</li>
        <p style="text-align:center;"><img src="images/slide-08-1.png" alt="Decomposition" title="Decomposition" width="500"></p>
	<li>Data dependencies:
	  <ul class="build">
	    <li>If <strong class="green prettyprint">COLUMN_1</strong> is green then <strong class="green prettyprint">COLUMN_2</strong> is red</li>
	    <li>If <strong class="green prettyprint"> COLUMN_1</strong> is blue then <strong class="green prettyprint">COLUMN_2</strong> is yellow</li>
	    <li>If <strong class="green prettyprint">COLUMN_1</strong> is orange then <strong class="green prettyprint">COLUMN_2</strong> is red</li>
	  </ul>
	</li>
        <li>For any colour x if <strong class="green prettyprint">COLUMN_1</strong> is x then <strong class="green prettyprint">COLUMN_2 is</strong> y</li>
	  </ul>
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 10 ================================================================================= -->
  <slide>
   <aside class="note">
      <section>
	<p>To solve the problem we create a new table that consists of the COLUMN_1 and COLUMN_2 only and we remove COLUMN_2 from the original table.</p>
	<br/>
	<p>Then the repetitions of pairs (green,red), (blue,yellow), and (orange, red) are no longer needed because the values in COLUMN_1 do not need to be associated with many other values in the remain columns.</p>
	<br/>
	<p>The repetitions disappeared from the original table because COLUMN_2 has been removed from the original table.</p>
	<br/>
	<p>It is still possible to restore the original table through join of the tables over an equality condition on COLUMN_1.</p>
	<br/>
	<p>The repetitions of values in COLUMN_1 like green repeated 3 times, blue and orange repeated 2 times each are inevtable because of a tabular representation of data. As it has been mentioned earlier such redundancies can be removed through clustering of a relational table over COLUMN_1.</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Where is a problem ?</h2>
    </hgroup>
    <article>
      <ul class="build">
        <li>Data dependencies can be represented as a separate relational table ... </li>
        <p style="text-align:center;"><img src="images/slide-09-1.png" alt="Decomposition" title="Decomposition" width="300"></p>
	<li> ... and <strong class="green prettyprint">COLUMN_2</strong> can be removed from the original table</li>
        <p style="text-align:center;"><img src="images/slide-09-2.png" alt="Decomposition" title="Decomposition" width="300"</p>	
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 11 ================================================================================= -->
  <slide>
   <aside class="note">
      <section>
	<p>Do the same data dependencies exist in BIG TABLE ?</p>
	<br/>
	<p>Yes, it is easy to find, that:</p>
	<br/>
	<p>Data dependencies:</p>
	<br/>
	<p>If customer number = 7 then first name of customer = James</p>
	<br/>
	<p>If customer number = 7 then last name of customer = Bond and it can be generalized to a data dependency:</p>
	<br/>
	<p>For any customer number x if customer number = x then first name of customer = y and last name of customer = z</p>
	<br/>
	<p>It also means, we can use such data dependency to create a separate table with information about the customer numbers and respective full names of the customers. The numbers and the names of customers are repeated in BIG TABLE many times because both customer number and full name of a customer must be repeated as many time as many orders are submitted by a customer.</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Where is a problem ?</h2>
    </hgroup>
    <article class="smaller">
      <ul class="build">
        <li>Do data dependencies exist in BIG TABLE ?
	  <ul class="build">
	    <pre class="prettyprint" data-lang="Big relational table">
	
+---------+-------+-------+---------+-------------+---------+-------+-------+-------+
| cnumber | fname | lname | onumber | odate       | lnumber | item  | price | total |
+---------+-------+-------+---------+-------------+---------+-------+-------+-------+
|    +----------------------+   +---------------+ |         |       |       |       |
|    |  7 | James | Bond  | |   | 7 | 2017-01-01| |       1 | bolt  | 23.04 |     5 |
|    |  7 | James | Bond  | |   | 7 | 2017-01-01| |       2 | screw | 29.01 |     3 |
|    |  7 | James | Bond  | |   | 7 | 2017-01-01| |       3 | nut   |  4.55 |     2 |
|    |    |       |       | |   +---------------+ |         |       |       |       |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       1 | bolt  | 23.04 |     1 |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       2 | screw | 23.04 |     1 |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       3 | nut   | 23.04 |     2 |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       4 | lock  | 23.04 |     1 |
|    +----------------------+   +---------------+ |         |       |       |       |
+---------+-------+-------+---------+-------------+---------+-------+-------+-------+</pre>
          </ul>
	</li>
	<li>Data dependencies:
	  <ul class="build">
	    <li>If <strong class="green prettyprint">cnumber</strong> = 7 then <strong class="green prettyprint">fname</strong> = James</li>
	    <li>If <strong class="green prettyprint">cnumber</strong> = 7 then <strong class="green prettyprint">lname</strong> = Bond</li>
	  </ul>
	</li>
	<li>For any customer number x if <strong class="green prettyprint">cnumber</strong> = x then <strong class="green prettyprint">fname</strong> = y and <strong class="green prettyprint">lname</strong> = z</li>
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 12 ================================================================================= -->
  <slide>
   <aside class="note">
      <section>
	<p>BIG TABLE contains more redundancies triggered by the same sort of data dependencies. For example</p>
	<br/>
	<p>If order number = 7 then order date = 2017-01-01</p>
	<br/>
	<p>If order number = 8 then order date = 2018-01-01</p>
	<br/>
	<p>In a general case:</p>
	<br/>
	<p>For any order number x if order number = x then order date = y</p>
	<br/>
	<p>Like before it is possible to eliminate such redundancies  through a new relational table that contains only information about the numbers of orders and dates of orders. Then, there is no need to repeat the identical pairs (order number, order date) with each item included in. an order.</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Where is a problem ?</h2>
    </hgroup>
    <article class="smaller">
      <ul>
        <li>Do data dependencies exist in BIG TABLE ?
	  <ul>
	    <pre class="prettyprint" data-lang="Big relational table">
	
+---------+-------+-------+---------+-------------+---------+-------+-------+-------+
| cnumber | fname | lname | onumber | odate       | lnumber | item  | price | total |
+---------+-------+-------+---------+-------------+---------+-------+-------+-------+
|    +----------------------+   +---------------+ |         |       |       |       |
|    |  7 | James | Bond  | |   | 7 | 2017-01-01| |       1 | bolt  | 23.04 |     5 |
|    |  7 | James | Bond  | |   | 7 | 2017-01-01| |       2 | screw | 29.01 |     3 |
|    |  7 | James | Bond  | |   | 7 | 2017-01-01| |       3 | nut   |  4.55 |     2 |
|    |    |       |       | |   +---------------+ |         |       |       |       |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       1 | bolt  | 23.04 |     1 |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       2 | screw | 23.04 |     1 |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       3 | nut   | 23.04 |     2 |
|    |  7 | James | Bond  | |   | 8 | 2018-01-01| |       4 | lock  | 23.04 |     1 |
|    +----------------------+   +---------------+ |         |       |       |       |
+---------+-------+-------+---------+-------------+---------+-------+-------+-------+</pre>
          </ul>
	</li>
	<li>Data dependencies:
	  <ul class="build">
	    <li>If <strong class="green prettyprint">onumber</strong> = 7 then <strong class="green prettyprint">odate</strong> = 2017-01-01</li>
	    <li>If <strong class="green prettyprint">onumber</strong> = 8 then <strong class="green prettyprint">odate</strong> = 2018-01-01</li>
	  </ul>
	</li>
        <ul class="build">
	  <li>For any order number x if <strong class="green prettyprint">onumber</strong> = x then <strong class="green prettyprint">odate</strong> = y</li>
	</ul>
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 13 ================================================================================= -->
  <slide>
    <hgroup>
      <h2 class="blue">Database Design Quality</h2>
      <h3 class="red">Outline</h3>
    </hgroup>
    <article>
      <ul>
         <li><a href="#2">Why not ONE BIG TABLE !?</a></li>	
	<li><a href="#8">Where is a problem ?</a></li>	
	<li><a class="red" href="#13">Functional dependency</a></li>	
      </ul>
<footer class="source"><a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 14 ================================================================================= -->
  <slide>
   <aside class="note">
      <section>
	<p>Data dependencies like if  customer number = 7 then first name of customer = James or if  order number = 7 then order date = 2017-01-01 or if a value in COLUMN_1 is green then in the same row a value in COLUMN_2 is red are consistent with a common pattern if if a value in column A is x then a value in column B is always y. What sort of pattern it is ? It is the same pattern as when we say that if a value of x is 2 then a value of y is 4, If a value of x is 3 then a value of y is 9, if a value of x is 4 then value of y is 16 ... and if a value of x is a then a value fo y is a*a. It simply a function that maps the values in one set into the values in the other set.</p>
	<br/>
	<p>If such data dependency is a function then it means that every value x in a column A is associated with only one value y in a column B. For example, every customer number in a column cnumber is associated with only one first name in a column fname, i.e. a customer has only one first name. Every value in a column student number is associated with one values in a column first name and with one value in a column last name. it means that each student has only one first name and one last name. Well, it is really a true reflection of the reality.</p>
	<br/>
	<p>In the same way, every customer has only one last name, every order has only one date, every car has on registration number.</p>
	<br/>
	<p>It is true that every part located in a given warehouse has only one quantity. It is because it would not be reasonable to say that in a warehouse XYZ we have 50 bolts in one corner and 40m bolts in another corner. we simply say that on a warehouse XYZ we have 90 bolts. It leads to a a function that maps the pairs of values (warehouse-name, part-name) onto integer numbers. </p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Functional dependency</h2>
    </hgroup>
    <article>
      <ul class="build">
        <li>What does it mean: <strong class="red">if a value in column A is x then a value in column B is always y ?</strong></li>
	<li>It means that <strong class="blue">every value x in a column A is associated with only one value y in a column B</strong></li>
	<li>For example, every customer number in a column <strong class="green prettyprint">cnumber</strong> is associated with only one first name in a column  <strong class="green prettyprint">fname</strong>, i.e. a customer has only one first name</li>
	<li>For example, every customer number in a column <strong class="green prettyprint">cnumber</strong> is associated with only one last name in a column  <strong class="green prettyprint">lname</strong> i.e. a customer has only one last name</li>
	<li>For example, every <strong class="blue">order number</strong> in a column <strong class="green prettyprint">onumber</strong> is associated with only one <strong class="blue">order date</strong> in a column  <strong class="green prettyprint">odate</strong> i.e. an order has only one date</li>
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 15 ================================================================================= -->
  <slide>
   <aside class="note">
      <section>
	<p>Returning to our original example,  we can find that  not all columns in BIG TABLE re[resent the functions. For example, such data dependency does not hold for the columns onumber and a column item. It is because an item name in a column item can be associated with many order numbers in a column onumber and an order number in a column onumber can be associated with many item names in a column item</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Functional dependency</h2>
    </hgroup>
    <article>
      <ul class="build">
	<li>Such data dependency does not hold for <strong class="blue">item name</strong> and <strong class="blue">order number</strong> because an <strong class="blue">item name</strong> in a column <strong class="green prettyprint">item</strong> can be associated with many <strong class="blue">order numbers</strong> in a column <strong class="green prettyprint">onumber</strong> and the opposite ...</li>
	<li>... an <strong class="blue">order number</strong> in a column <strong class="green prettyprint">onumber</strong> can be associated with many <strong class="blue">item names</strong> in a column <strong class="green prettyprint">item</strong></li> 
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>  
<!-- slide 16 ================================================================================= -->
  <slide>
   <aside class="note">
      <section>
	<p>If in a general case every value in a column A is associated with only one value in a column B then it means that the columns A and B represent a function f that maps the values in a column A into the values in a column B. Such such fact is denoted as:</p>
	<br/>
	<p>f : domain(A) ‚Üí domain(B)</p>
	<br/>
	<p>where domain(A) and domain(B) are the sets of all attributes in the columns A and B respectively.</p>
	<br/>
	<p>If every value in a column cnumber is associated with only one value in a column fname then the columns cnumber and fname represent a function that maps the values in a column cnumber into the values in a column fname. Such fast is denoted as:</p>
	<br/>
	<p>f : domain(cnumber) ‚Üí domain(fname)</p>
	<br/>
	<p>where domain(cnumber) and domain(fname) are the sets of all attributes in the columns cnumber and fname.</p>
	<br/>
	<p>If every value in a column cnumber is associated with only one value in a column lname then the columns cnumber and lname represent a function that maps the values in a column cnumber into the values in a column lname. Such fact is denoted as:</p>
	<br/>
	<p>f : domain(cnumber) ‚Üí domain(lname)</p>
	<br/>
	<p>where domain(cnumber) and domain(lname) are the sets of all attributes in the columns cnumber and lname.</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Functional dependency</h2>
    </hgroup>
    <article>
      <ul class="build">
	<li>If every value in a column <strong class="red">A</strong> is associated with only one value in a column <strong class="red">B</strong> then it means that the columns <strong class="red">A</strong> and <strong class="red">B</strong> represent a function <strong class="red">f</strong> that maps the values in a column <strong class="red">A</strong> into the values in a column <strong class="red">B</strong></li>
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">f : domain(A) &rarr; domain(B)</strong></li>
  	  </ul>
	</div>	
	<li>If every value in a column <strong class="green prettyprint">cnumber</strong> is associated with only one value in a column <strong class="green prettyprint">fname</strong> then the columns  <strong class="green prettyprint">cnumber</strong> and  <strong class="green prettyprint">fname</strong> represent a function</li>
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">f : domain(cnumber) &rarr; domain(fname)</strong></li>
  	  </ul>
	</div>
	<li>If every value in a column <strong class="green prettyprint">cnumber</strong> is associated with only one value in a column <strong class="green prettyprint">lname</strong> then the columns  <strong class="green prettyprint">cnumber</strong> and  <strong class="green prettyprint">lname</strong> represent a function</li>
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">f : domain(cnumber) &rarr; domain(lname)</strong></li>
  	  </ul>
	</div>
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
 <!-- slide 17 ================================================================================= -->
  <slide>
   <aside class="note">
      <section>
	<p>If every value in a column onumber is associated with only one value in a column odate then the columns onumber and odate represent a function that maps the values in a column onumber into the values in a column odate. Such fact is denoted as:</p>
	<br/>
	<p>f : domain(onumber) ‚Üí domain(odate)</p>
	<br/>
	<p>where domain(onumber) and domain(odate) are the sets of all attributes in the columns onumber and odate.</p>
	<br/>
	<p>In a general case, if the columns A and B in a relational table R represent a function f : domain(A) ‚Üí domain(B)</p>
	<br/>
	<p>then in the future it will be denoted by A ‚Üí B and we shall say that a functional dependency A ‚Üí B is valid in a relational table R or that A functionally determines B.</p>
	<br/>
	<p>In the other words  if A ‚Üí B then it means that every value in a column A is associated with exactly one value in a column B. For example in a relational table:</p>
A  |  B  |  C </br>
--------------</br>
1  |  2  |  3</br>
1  |  2  |  4</br>
2  |  1  |  4</br>

it is true that: </br>
A ‚Üí B</br>
B ‚Üí A</br>
B,C ‚Üí A</br>
A,C ‚Üí B<br/>
	<p>it is NOT true that A ‚Üí C, it is NOT true that B ‚Üí C, it is NOT true that C ‚Üí B, it is NOT true that C ‚Üí A.</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Functional dependency</h2>
    </hgroup>
    <article>
      <ul class="build">
	<li>If every value in a column <strong class="green prettyprint">onumber</strong> is associated with only one value in a column <strong class="green prettyprint">odate</strong> then the columns  <strong class="green prettyprint">onumber</strong> and  <strong class="green prettyprint">odate</strong> represent a function</li>
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">f : domain(onumber) &rarr; domain(odate)</strong></li>
  	  </ul>
	</div>
	<li>If the columns <strong class="red">A</strong> and <strong class="red">B</strong> in a relational table <strong class="red">R</strong> represent a function</li>
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">f : domain(A) &rarr; domain(B)</strong></li>
	  </ul>
	</div>
	<li>then in the future it will be denoted by</li>
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">A &rarr; B</strong></li>
  	  </ul>
	</div>	
	<li>and we shall say that a <strong class="red">functional dependency A &rarr; B is valid in a relational table R</strong> or that <strong class="red">A functionally determines B</strong></li>	
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>  
<!-- slide 18 ================================================================================= -->
  <slide>
   <aside class="note">
      <section>
	<p>The following functional dependencies are valid in a big table CUSTOMER:</p>
	<br/>
	<p>cnumber ‚Üí fname -  it means that every customer has one first name</p>
	<br/>
	<p>cnumber ‚Üí lname - it means that every customer has one last name</p>
	<br/>
	<p>onumber ‚Üí odate -  it means that every order has one date </p>
	<br/>
	<p>onumber ‚Üí cnumber - it mens that every order is submitted by one customer</p>
	<br/>
	<p>onumber ‚Üí fname, lname - it means that every order is related to one first name, and one last name of a customer who submitted an order</p>
	<br/>
	<p>onumber, lnumber ‚Üí item - it means that very line in an order is related to only one item</p>
	<br/>
	<p>onumber, lnumber ‚Üí price, total - it means that very line in an order is related to one price and one total number number of items</p>
	<br/>
	<p> ... and the others</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Functional dependency</h2>
    </hgroup>
    <article>
      <ul class="build">
	<li>Therefore, the following functional dependencies are valid in a big table <strong class="green prettyprint">CUSTOMER</strong>:</li>
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">cnumber &rarr; fname</strong></li>
  	  </ul>
	</div>
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">cnumber &rarr; lname</strong></li>
  	  </ul>
	</div>
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">onumber &rarr; odate</strong></li>
  	  </ul>
	</div>
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">onumber &rarr; cnumber</strong></li>
  	  </ul>
	</div>
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">onumber &rarr; fname, lname</strong></li>
  	  </ul>
	</div>	
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">onumber, lnumber &rarr; item</strong></li>
  	  </ul>
	</div>
	<div style="text-align:center">
	  <ul>
	    <li><strong class="red">onumber, lnumber &rarr; price, total</strong></li>
  	  </ul>
	</div>	
	<li> ... and the others</li>
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>
<!-- slide 19 ================================================================================= -->
  <slide>
   <aside class="note">
      <section>
	<p>"Functional dependency" is a special kind of so called "data dependency" which is a reflection of the real world consistency constraint. if a database is a description of a selected fragment of the reality then like many other data dependencies, functional dependency is valid in the contents of the correctly recorded data.</p>
	<br/>
	<p>Functional dependencies can be used to represent the semantics (meaning) of data. For example, is it possible to discover any functional dependencies in a relational table R(a, b, c) ? It is not because we do not know the semantics (meanings) of a relational table name R and  the column A, B and C. If we replace the names R,  A, B and C with the meaningful names like COURSE, code, title, credits then it is possible use the semantics of the names COURSE, code, title credits to discover functional dependencies:</p>
	<br/>
	<p>code ‚Üí title</p>
	<p>code ‚Üí credits</p>
	<p>title ‚Üí credits</p>
	<p>title ‚Üí code</p>
	<p>Such configuration of functional dependencies enforce the semantics where each corse has one code, one title and one total number of credist and it never happens that two or more courses have the same title and different code.</p>
	<p>If functional dependencies describe data semantics then functional dependencies can be used to determine whether a relational schema (header of relational table) is constructed in a correct way.</p>
	<br/>
	<p>It is also possible to use functional dependencies can be used to design a database, however such approach is used very rarely.  In a database design methodology based on analysis of functional dependencies, we first collect all attributes. Then we discover the functional dependencies among the attributes and than we synthesize the relational schemas that validate certain selected sets of functional dependences. it is so called "synthesis approach" to database design based on analysis of functional dependencies.  The other methodology we assume the existence of one relational schema that consists of all attributes and we decompose such schema into smaller schemas that validate certain select sets of functional dependencies. It is so called decomposition approach to database design based on analysis of functional dependencies.</p></br>
	<p>In this lecture we shall use the decomposition approach to prove the correctness of the relational schemas and to decompose incorrectly design relational schemas into the correct ones.</p>
	<br/>
      </section>
    </aside>  
    <hgroup>
      <h2 class="blue">Functional dependency</h2>
    </hgroup>
    <article>
      <ul class="build">
	<li><strong class="red">Functional dependency</strong> is a special kind of so called <strong class="red">data dependency</strong> which is a reflection of the real world <strong class="red">consistency constraint</strong></li>
	<li><strong class="red">Functional dependencies</strong> can be used to describe the <strong class="red">semantics</strong> (meaning) of data</li>
	<li><strong class="red">Functional dependencies</strong> can be used to determine whether a relational schema (header of relational table) is constructed in a correct way</li>
	<li><strong class="red">Functional dependencies</strong> can be used to design a database, however such approach is used very rarely</li>
      </ul>
<footer class="source"><strong class="blue">In HTML view press 'p' to see the lecture notes</strong><br/>
<a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
</slide>
<!-- slide 20 ================================================================================= -->
  <slide>
    <hgroup>
      <h2 class="blue">References</h2>
    </hgroup>
    <article>
      <ul class="build">
        <li>T. Connoly, C. Begg, Database Systems, A Practical Approach to Design, Implementation, and Management, Chapter 14.1 The Purpose of Normalization, Chapter 14.2 How Normalization Supports Database Design, 14.3 Data Redundancies and Update Anomalies, Pearson Education Ltd, 2015</li>
      </ul>
<footer class="source"><a href="#2">TOP</a>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
2023</footer>
    </article>
  </slide>

  <slide class="backdrop"></slide>

</slides>
<!--
<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + 'https://protect-au.mimecast.com/s/q_lICwV1ppHg0W91S9Edlb?domain=google-analytics.com';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
-->

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>

